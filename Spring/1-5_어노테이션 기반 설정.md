# 어노테이션 기반 설정

## 어노테이션 설정 기초

대부분의 프레임워크가 그렇듯 스프링 프레임워크 역시 XML을 잘 설정해야한다. 이것을 도와주는 것이 어노테이션이다.

### Context Namespace 추가

context namespace를 추가하여야 사용할 수 있다.

### Component-scan 설정

* 스프링 설정 파일에 애플리케이션에서 사용할 객체들을 `<bean>` 등록하지 않고 자동으로 생성하려면 `<context:component-scan/>`이라는 엘리먼트를 정의해야 함.
* 스프링 컨테이너는 class path에 있는 클래스들을 스캔하여 @Component가 설정된 클래스들을 자동으로 객체 생성.
* 여기서 `<context:component-scan>`의 base-package속성이 중요. 이 속성에 해당하는 패키지로 시작하는 모든 패키지를 스캔대상에 포함.

### Component

* 클래스 선언부 위에 `@Component`로 처리 가능.
* 그러나 클라이언트 프로그램에서는 id가 없어서 해당 객체를 요청할 수 없음
* 따라서 `@Component("아이디")` 처럼 id나 name이 필요.

## 의존성 주입 설정

스프링에서 의존성 주입을 지원하는 어노테이션은 `@Autowired`, `@Inject`, `@Qualifier`, `Resource`가 있고 이 중에서 Autowired, Qualifer만 스프링에서 제공.

### `@Autowired`

* 생성자, 메소드, 멤버변수 위에 모두 사용 가능.
* 대부분 멤버변수 위에 선언하여 사용.
* 스프링 컨테이너는 멤버변수 위에 붙은 `@Autowired`를 확인하는 순간 해당 변수의 타입을 체크.
* 그 타입의 객체가 메모리에 존재하는지를 확인한 후에 그 객체를 변수에 주입.

### `@Qualifier`

* 의존성 주입의 대상이 되는 타입의 객체가 두 개 이상일 경우 문제가 생김.
* 이 때 `@Autowired`와 함께 `@Qualifier("타입")`을 사용하여 하나로 특정지을 수 있음.

### `@Resource`

* `@Autowired`는 변수의 타입을 기준으로 객체를 검색
* `@Resource`는 객체의 이름을 기준으로 객체를 검색하여 의존성 주입 처리.

### 어노테이션과 XML 설정 병행하여 사용하기

* 어노테이션을 사용하는 것과 XML을 사용하는 것에는 서로 장단점이 있다.
	1. 어노테이션
		1. XML 설정에 대한 부담이 없음.
		2. 의존관계에 대한 정보가 자바 소스에 들어가 있어서 사용하기 편리
		3. 의존성 주입할 객체의 이름이 자바 소스에 명시되어야 하므로 필요시 자바 소스를 수정해야 함.
	2. XML
		1. 자바 소스를 수정하지 않고 XML 파일의 설정만 변경하면 실행되는 객체를 교체 가능. 유지보수가 좋음
		2. XML 설정에 대한 부담.
		3. 자바소스에 의존관계와 관련된 어떤 메타데이터도 없으므로 XML 설정을 해석해야만 의존성 관계 파악 가능
* 결국, 변경되지 않는 객체는 어노테이션으로 설정, 변경될 수 있는 객체는 XML로 설정하는 것이 일반적.
* 우리가 직접 만든 클래스는 어노테이션 XML 둘 다 가능
* 그러나 라이브러리로 제공된 클래스는 XML만 가능.

## 추가 어노테이션

시스템 전체는 프레젠테이션 레이어와 비즈니스 레이어로 나눌 수 있음

1. 프레젠테이션 레이어
	* 사용자와의 커뮤니케이션 담당
2. 비즈니스 레이어
	* 사용자의 요청에 대한 비즈니스 로직 처리 담당

* 앞에서는 `@Component`로 스프링 컨테이너가 해당 클래스 객체를 생성하도록 설정하였음.
* 스프링 프레임워크는 각각의 역할에 따라 다른 어노테이션 사용.
	1. `@Service` : 비즈니스 로직 처리하는 Service 클래스
	2. `@Respository` : 데이터베이스 연동 처리하는 DAO 클래스
	3. `@Controller` : 사용자 요청을 제어하는 Controller 클래스
