# 트랜잭션 처리

* 스프링에서는 트랜잭션 처리를 컨테이너가 자동으로 처리하도록 설정할 수 있다. - 선언적 트랜잭션 처리
* AOP를 사용하지만 XML로만 사용할 수 있다.
* 애스팩트도 `<aop:advisor>`만 사용 가능하다.

## 트랜잭션 네임스페이스 등록

## 트랜잭션 관리자 등록

* 가장 먼저 등록하는 것이 트랜잭션 관리자 클래스이다.
* 스프링에서는 다양한 트랜잭션 관리자를 지원하는데, 이는 모두 `PlatformTransactionmanager` 인터페이스를 구현한 클래스들이다.
* 따라서 스프링이 제공하는 모든 트랜잭션 관리자는 트랜잭션이 필요한 `commit()`, `rollback()`을 가지고 있다.

## 트랜잭션 어드바이스 설정

* 트랜잭션의 관리기능의 어드바이스는 `<tx:advice>` 엘리먼트를 사용하여 설정.
* 트랜잭션 관리기능의 어드바이스는 직접 구현하지 않으며, 스프링 컨테이너가 `<tx:advice>` 설정을 참조하여 자동으로 생성한다.
* 즉, 트랜잭션 관리 어드바이스 객체의 클래스 이름이나 메소드를 확인할 수 없다.
* 따라서 단지 생성되는 어드바이스의 아이디를 id 속성으로, 어드바이스 객체가 사용할 트랜잭션 관리자를 transaction-manager 속성으로 지정할 뿐이다.
* `<tx:method>` 엘리먼트가 가질 수 있는 속성들
	1. name
	2. read-only
	3. no-rollback-for
	4. rollback-for

## AOP 설정을 통한 트랜잭션 적용

* `<aop:advisor>` 엘리먼트를 사용해야함.
* 지정된 메소드가 호출될 때, 등록된 어드바이스가 동작하여 트랜잭션을 관리하도록 설정.

트랜잭션은 메소드단위로 관리되므로 발생한 하나의 예외로 인해 모든 실행이 롤백될 수 있다.
